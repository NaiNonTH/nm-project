<script>
	import RandExpr from '$lib/components/RandExpr.svelte';
	import { page } from '$app/stores';
	import '../app.css';

	export let data;

	const links = [
		{
			title: 'Root of Equation',
			href: '/root-of-equation'
		},
		{
			title: 'Linear Algebra',
			href: '/linear-algebra'
		},
		{
			title: 'Interpolation',
			href: '/interpolation'
		},
		{
			title: 'Extrapolation',
			href: '/extrapolation'
		},
		{
			title: 'Integration',
			href: '/integration'
		},
		{
			title: 'Difference',
			href: '/numerical-difference'
		}
	];
</script>

<header>
	<h1><span aria-hidden="true">🧮</span> Numerical Method Project</h1>
</header>
<div class="sidebar">
	<nav class="site-nav">
		<ul>
			<li>
				<a data-icon="🏠" class="home" aria-current={$page.url.pathname === '/'} href="/">Home</a>
			</li>
		</ul>
		<ul>
			{#each links as { title, href }}
				<li>
					<a aria-current={$page.url.pathname.includes(href) && $page.status == 200} {href}>
						{title}
					</a>
				</li>
			{/each}
		</ul>
		<ul>
			<li>
				<a
					aria-current={$page.url.pathname.includes('/credits') && $page.status == 200}
					href="/credits">Credits</a
				>
			</li>
		</ul>
	</nav>
	<div class="last-commit">
		<h3>Last Commit:</h3>
		{#if data.lastCommit}
			{@const lastCommit = data.lastCommit}
			{@const commit = lastCommit.commit}
			<p>
				<a target="_blank" href={lastCommit.html_url}>{commit.message}</a> by {commit.author.name} ({new Date(
					commit.author.date
				).toLocaleString()})
			</p>
		{/if}
	</div>
	<div>
		<h3>Info</h3>
		<dl>
			<dt>Visitors</dt>
			<dd>
				{#if data.visitors !== null}
					{data.visitors}
				{:else}
					N/A
				{/if}
			</dd>
			<dt>Runs</dt>
			<dd>
				{#if data.runs !== null}
					{data.runs}
				{:else}
					N/A
				{/if}
			</dd>
		</dl>
	</div>
</div>
<main>
	<slot />
</main>
<RandExpr />
<footer>
	<strong>Numerical Method Project</strong>, an open-source University project by
	<strong><a href="https://nons.page">nons.page</a></strong>.
</footer>
